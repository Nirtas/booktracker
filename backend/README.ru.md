[English version](README.md)

## API Эндпоинты

Все эндпоинты имеют префикс `/api`.

### Аутентификация

Для доступа к защищенным эндпоинтам требуется передавать JWT `accessToken` в заголовке `Authorization`.

```
Authorization: Bearer <accessToken>
```

`accessToken` можно получить после успешного входа в систему (`POST /tokens`). Этот токен действителен в течении **15 минут** (можно редактировать в файле конфигурации Ktor `application.yaml`) и содержит `userId`, который используется на сервере для идентификации пользователя. 

`refreshToken` действителен в течение **30 дней** (этот параметр также настраивается в конфигурации).

| Метод | Эндпоинт | Аутентификация | Описание |
| --- | --- | --- | --- |
| **Книги** |
| `GET` | `/books` | **Требуется** | Получение списка всех книг текущего пользователя |
| `POST` | `/books` | **Требуется** | Создание новой записи о книге для текущего пользователя |
| `GET` | `/books/{id}` | **Требуется** | Получение детальной информации о книге |
| `DELETE` | `/books/{id}` | **Требуется** | Удаление книги |
| `PUT` | `/books/{id}` | **Требуется** | Обновление информации о книге |
| `POST` | `/books/{id}/cover` | **Требуется** | Обновление обложки для книги |
| **Жанры** |
| `GET` | `/genres` | **Требуется** | Получение списка доступных жанров |
| **Аутентификация и Пользователи** |
| `POST` | `/tokens` | Не требуется | Вход в систему, получение пары `accessToken` и `refreshToken` |
| `POST` | `/tokens/refresh` | Не требуется | Обновление пары `accessToken` и `refreshToken` |
| `POST` | `/users` | Не требуется | Регистрация нового пользователя |
| `POST` | `/verifications` | Не требуется | Подтверждение email с помощью кода |
| `POST` | `/verifications/resend` | Не требуется | Повторная отправка кода подтверждения |
| `GET` | `/users/me` | **Требуется** | Получение информации о текущем пользователе |
| `DELETE` | `/users/me` | **Требуется** | Удаление аккаунта текущего пользователя |
| `PUT` | `/users/me/email` | **Требуется** | Обновление email текущего пользователя |
| `PUT` | `/users/me/password` | **Требуется** | Обновление пароля текущего пользователя |
